<!DOCTYPE html>
<!--[if lte IE 8 ]>
<html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--
***************  *      *     *
      8          *    *       *
      8          *  *         *
      8          **           *
      8          *  *         *
      8          *    *       *
      8          *      *     *
      8          *        *   ***********    -----Theme By Kieran(http://go.kieran.top)
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<!--<![endif]-->

<head>
  <title>promiseä¸­çš„ä¸€äº›å¸¸è§é”™è¯¯ | ğŸ„</title>
  <!-- Meta data -->
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="ğŸ„">
    <meta name="author" content="">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <!-- Favicon, (keep icon in root folder) -->
    <link rel="Shortcut Icon" href="/img/favicon.jpg" type="image/ico">

    <link rel="alternate" href="/atom.xml" title="ğŸ„" type="application/atom+xml">
    <link rel="stylesheet" href="/css/all.css" media="screen" type="text/css">
    
    <link rel="stylesheet" href="/highlightjs/vs.css" type="text/css">
    

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="/css/ie8.css" />
    <![endif]-->

    <!-- jQuery | Load our jQuery, with an alternative source fallback to a local version if request is unavailable -->
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.11.1.min.js"><\/script>')</script>

    <!-- Load these in the <head> for quicker IE8+ load times -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="/js/html5shiv.min.js"></script>
    <script src="/js/respond.min.js"></script>
    <![endif]-->

  
  
  

  <style>.col-md-8.col-md-offset-2.opening-statement img{display:none;}</style>
</head>

<!--
<body class="post-template">
-->
<body id="index" class="lightnav animsition">

      <!-- ============================ Off-canvas navigation =========================== -->

    <div class="sb-slidebar sb-right sb-style-overlay sb-momentum-scrolling">
        <div class="sb-close" aria-label="Close Menu" aria-hidden="true">
            <img src="/img/close.png" alt="Close">
        </div>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu">
            <li><a href="/" class="animsition-link" title="Home">ä¸»é¡µ</a></li>
            <li><a href="/2017/08/17/è¿‘æ—¥ä¹¦å•/" class="animsition-link" title="bookList">è¿‘æ—¥ä¹¦å•</a></li>
            <li><a href="/2017/04/13/å®šæœŸæ€»ç»“/" class="animsition-link" title="review">è‡ªæˆ‘å›é¡¾</a></li>
            <li><a href="/2017/05/13/taskAndScore/" class="animsition-link" title="recentTask">è¿‘æœŸä»»åŠ¡</a></li>
            <li><a href="/2017/02/13/mark/" class="animsition-link" title="marked">æˆ‘çš„è‰åŸ</a></li>
            <li><a href="/2017/09/18/å‘¨æœ«è®¡åˆ’/" class="animsition-link" title="weekend">å‘¨æœ«è®¡åˆ’</a></li>
            <li><a href="/archives" class="animsition-link" title="archive">æ–‡ç« åˆ—è¡¨</a></li>
            <!-- Dropdown Menu -->
			 
            
        	<li>
        		<a class="sb-toggle-submenu">åˆ†ç±»<span class="sb-caret"></span></a>
            	<ul class="sb-submenu">
				  	
				    <li><a href="/categories/å‰ç«¯/" class="animsition-link">å‰ç«¯<small>(17)</small></a></li>
				    
				    <li><a href="/categories/å¹´åº¦/" class="animsition-link">å¹´åº¦<small>(7)</small></a></li>
				    
				    <li><a href="/categories/æ—…æ¸¸/" class="animsition-link">æ—…æ¸¸<small>(17)</small></a></li>
				    
				    <li><a href="/categories/ç”Ÿæ´»/" class="animsition-link">ç”Ÿæ´»<small>(9)</small></a></li>
				    
				    <li><a href="/categories/ç¬”è®°/" class="animsition-link">ç¬”è®°<small>(4)</small></a></li>
				    
				    <li><a href="/categories/ç®—æ³•/" class="animsition-link">ç®—æ³•<small>(4)</small></a></li>
				    
				</ul>
        	</li>
			
            
            <!-- <li>
                <a class="sb-toggle-submenu">Links<span class="sb-caret"></span></a>
                <ul class="sb-submenu">
                    
                    <li><a href="http://go.kieran.top/" class="animsition-link">Kieran</a></li>
                    
                    <li><a href="http://domain.com/" class="animsition-link">Name</a></li>
                    
                </ul>
            </li> -->
            
        </ul>
        <!-- Lists in Slidebars -->
        <ul class="sb-menu secondary">
            <li><a href="/about.html" class="animsition-link" title="about">About</a></li>
            <li><a href="/atom.xml" class="animsition-link" title="rss">RSS</a></li>
        </ul>
    </div>
    
    <!-- ============================ END Off-canvas navigation =========================== -->

    <!-- ============================ #sb-site Main Page Wrapper =========================== -->

    <div id="sb-site">
        <!-- #sb-site - All page content should be contained within this id, except the off-canvas navigation itself -->

        <!-- ============================ Header & Logo bar =========================== -->

        <div id="navigation" class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <!-- Nav logo -->
                    <div class="logo">
                        <a href="/" title="Logo" class="animsition-link">
                        
                        </a>
                    </div>
                    <!-- // Nav logo -->
                    <!-- Info-bar -->
                    <nav>
                        <ul class="nav">
                            <li><a href="/" class="animsition-link">ğŸ„</a></li>
                            <li class="nolink"><span>current mood: </span>æ—¥è½ğŸŒ„ï¼Œç¹æ˜ŸğŸŒƒï¼Œå†°é•‡å•¤é…’ğŸºï¼Œâ›±ï¸æ¸¸æ³³æ±  ğŸŠ.</li>
                            
                            <li><a href="https://github.com/IrisZhuang" title="Github" target="_blank"><i class="icon-github"></i></a></li>
                            
                            
                            
                            
                            
                            <li><a href="http://weibo.com/2460421387" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a></li>
                            
                            <li class="nolink"><span>Welcome!</span></li>
                        </ul>
                    </nav>
                    <!--// Info-bar -->
                </div>
                <!-- // .container -->
                <div class="learnmore sb-toggle-right">More</div>
                <button type="button" class="navbar-toggle menu-icon sb-toggle-right" title="More">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar before"></span>
                <span class="icon-bar main"></span>
                <span class="icon-bar after"></span>
                </button>
            </div>
            <!-- // .navbar-inner -->
        </div>

        <!-- ============================ Header & Logo bar =========================== -->

</div>
      
<section id="intro">
    <div class="container">
        <div class="row col-md-offset-2">
            <div class="col-md-8">
    			<span class="post-meta">
      <time datetime="2017-06-17T06:02:19.000Z" itemprop="datePublished">
          2017-06-17
      </time>
    
    
    | 
    <a href="/tags/node/">node</a>
    
    
</span>
                <h1>promiseä¸­çš„ä¸€äº›å¸¸è§é”™è¯¯</h1>
            </div>
        </div>
        <div class="col-md-8 col-md-offset-2">
      		<h4 id="From-we-have-a-problem-with-promises"><a href="#From-we-have-a-problem-with-promises" class="headerlink" title="From we-have-a-problem-with-promises"></a>From <a href="https://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html" target="_blank" rel="noopener">we-have-a-problem-with-promises</a></h4><h5 id="åˆçº§é”™è¯¯"><a href="#åˆçº§é”™è¯¯" class="headerlink" title="åˆçº§é”™è¯¯"></a>åˆçº§é”™è¯¯</h5><ol>
<li><p>æ­£ç¡®ä½¿ç”¨composing promises  </p>
<pre><code>remotedb.allDocs({  
    include_docs: true,  
    attachments: true  
}).then(function (result) {  
    var docs = result.rows;  

    docs.forEach(function(element) {  
        localdb.put(element.doc).then(function(response) {  
        alert(&quot;Pulled doc with id &quot; + element.doc._id + &quot; and added to local db.&quot;);  
    }).catch(function (err) {   
        if (err.name == &apos;conflict&apos;) {  
        localdb.get(element.doc._id).then(function (resp) {  
        localdb.remove(resp._id, resp._rev).then(function (resp) {  
     // et cetera...  
</code></pre></li>
</ol>
<pre><code>then é‡Œé¢è°ƒç”¨then,æ›´å¥½çš„å®ç°æ–¹å¼æ˜¯composing promisesï¼Œåä¸€ä¸ªthenä¼šè°ƒç”¨å‰ä¸€ä¸ªè¿”å›çš„ç»“æœã€‚

ä¼˜åŒ–æ–¹æ¡ˆï¼š  

    remotedb.allDocs(...).then(function (resultOfAllDocs) {  
        return localdb.put(...);  
    }).then(function (resultOfPut) {  
        return localdb.get(...);  
    }).then(function (resultOfGet) {  
        return localdb.put(...);  
    }).catch(function (err) {  
        console.log(err);  
    });
</code></pre><ol start="2">
<li><p>ç”¨promise.all()å®ç°forEach/for/while</p>
<pre><code>// I want to remove() all docs  
db.allDocs({include_docs: true}).then(function (result) {  
result.rows.forEach(function (row) {  
    db.remove(row.doc);    
});  
}).then(function () {  
// I naively believe all docs have been removed() now!  
});  
</code></pre><p> å‰ä¸€ä¸ªthenå¹¶æ²¡æœ‰è¿”å›ä¸€ä¸ªæ–°çš„promiseç»“æœç»™ç¬¬äºŒä¸ªthen,æ‰€ä»¥ç¬¬äºŒä¸ªthenåœ¨db.remove()ä¹‹å‰å°±å·²ç»æ‰§è¡Œã€‚</p>
<p> è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code>db.allDocs({include_docs: true}).then(function (result) {  
return Promise.all(result.rows.map(function (row) {  
    return db.remove(row.doc);  
}));  
}).then(function (arrayOfResults) {  
// All docs have really been removed() now!  
});  
</code></pre></li>
</ol>
<ol start="3">
<li><p>æ²¡æœ‰åŠ  .catch()</p>
<ul>
<li><p>.then()çš„ç¬¬äºŒä¸ªå‚æ•°å’Œ.cathch()çš„åŒºåˆ«ï¼Ÿ</p>
<p>thenåªä¼šæ•æ‰å‰ä¸€ä¸ªpromiseé‡Œçš„é”™è¯¯ï¼Œcatch()ä¼šæ•æ‰å…¨éƒ¨promiseé“¾ä¸Šçš„é”™è¯¯</p>
</li>
</ul>
</li>
</ol>
<ol start="4">
<li><p>ä½¿ç”¨â€deferredâ€</p>
<p> jQuery and Angular were using this â€œdeferredâ€ pattern,<br> which has now been replaced with the ES6 Promise spec</p>
<p> deferredæ˜¯jQueryå’ŒAngularä¸­å®ç°promiseçš„æ–¹å¼ï¼Œç°åœ¨å·²è¢«ES6çš„Promiseä»£æ›¿</p>
</li>
<li><p>side effects ä»£æ›¿return<br>(å…³é”®é—®é¢˜ï¼ŒSeriously, this is the one weird trick that, once you understand it, will prevent all of the errors Iâ€™ve been talking about.)</p>
</li>
</ol>
<ul>
<li><p><a href="https://www.zhihu.com/question/30779564" target="_blank" rel="noopener">ä»€ä¹ˆæ˜¯side effects?</a></p>
<p>  å‡½æ•°ä¸€èˆ¬è®¤ä¸ºæ˜¯æ²¡æœ‰çŠ¶æ€çš„ï¼Œæ¯æ¬¡ç”¨ç›¸åŒçš„è¾“å…¥è°ƒç”¨æ—¶åº”å½“ç»™å‡ºç›¸åŒçš„è¾“å‡ºï¼Œä¸”ä¸ä¼šå½±å“ç¨‹åºçš„å…¶å®ƒéƒ¨åˆ†ã€‚å¦‚æœå‡½æ•°å¯¹ç¨‹åºçš„çŠ¶æ€æœ‰å½±å“ï¼Œè¿™ç§å½±å“å°±å«ä½œâ€œside effectsâ€ã€‚  ä¾‹å¦‚ï¼š  </p>
</li>
</ul>
<pre><code>    int counter = 0;

    // with side effect
    int intCounter() {
        counter += 1;
        return counter;
    }

    // without side effect
    int intNumber(int m) {
        return m + 1;
    }

intCounteræ”¹å˜äº†å¤–éƒ¨ç¯å¢ƒ,æ‰€ä»¥æ˜¯side effects; intNumberåªæ”¹å˜äº†è‡ªèº«å˜é‡ï¼Œæ‰€ä»¥without side effectï¼›

    somePromise().then(function () {  
    someOtherPromise();  
    }).then(function () {  
    // Gee, I hope someOtherPromise() has resolved!  
    // Spoiler alert: it hasn&apos;t.  
    });  

å›åˆ°ä¹‹å‰çš„é—®é¢˜ï¼Œ
eg.    

    somePromise().then(function () {  
    // I&apos;m inside a then() function!  
    });  


å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªthen()çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åšè¿™äº›äº‹ï¼š

- è¿”å›ä¸€ä¸ªpromise
- è¿”å›ä¸€ä¸ªå¼‚æ­¥çš„value æˆ–è€… undefine
- è¿”å›ä¸€ä¸ªå¼‚æ­¥çš„é”™è¯¯

ç¬¬äºŒä¸ªthenä¸ä¼šå…³å¿ƒå‰ä¸€ä¸ªthenè¿”å›çš„æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„ç»“æœï¼Œä½†æ˜¯non-returningçš„å‡½æ•°å°†è¿”å›undefineï¼Œæ‰€ä»¥å¾ˆå¯èƒ½å½“ä½ æƒ³è¿”å›ä¸€äº›ä¸œè¥¿çš„æ—¶å€™ï¼Œå®é™…ä¸Šä»…ä»…å®ç°äº†ä¸€ä¸ªside effects.
æ‰€ä»¥ï¼Œæ¯”è¾ƒå¥½çš„å»ºè®®æ˜¯æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½åœ¨then()ä¸­åŠ ä¸Šreturn æˆ–è€… throw.
è€Œ throw æ˜¯promiseçš„å¦ä¸€ä¸ªç¥å¥‡ä¹‹å¤„ï¼Œcatchå¯ä»¥æ¥æ”¶åˆ°ä¸€ä¸ªåŒæ­¥çš„é”™è¯¯ï¼Œä¹Ÿå¯æ¥å—æ¥è‡ªè¢«æ‹’ç»çš„promiseçš„å¼‚æ­¥é”™è¯¯ã€‚ä¾‹å¦‚ï¼ŒJSON.parse(params)ä¸­paramsæ— æ•ˆæ—¶æŠ¥çš„é”™è¯¯å°†ä¼šè¢«catchæ•æ‰ã€‚
</code></pre><h5 id="è¿›é˜¶é”™è¯¯"><a href="#è¿›é˜¶é”™è¯¯" class="headerlink" title="è¿›é˜¶é”™è¯¯"></a>è¿›é˜¶é”™è¯¯</h5><ol>
<li><p>ä¸çŸ¥é“ç”¨promise.resolve()</p>
<p> ä¹ æƒ¯new Promise((resolve,reject)=&gt;{resolve(someSynchronousValue)} ).then()<br> å¯ä»¥ä¼˜åŒ–ä¸º<br> Promise.resolve(someSynchronousValue).then();<br> å¥½å¤„æ˜¯ä¸€äº›åŒæ­¥é”™è¯¯å¯ä»¥è¢«æ•æ‰åˆ°ã€‚<br> å¦‚æœå¸Œæœ›å¾—åˆ°ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è°ƒç”¨Promise.resolveæ–¹æ³•ã€‚eg. var p = Promise.resolve();<br> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç«‹å³resolveçš„Promiseå¯¹è±¡ï¼Œæ˜¯åœ¨æœ¬è½®â€œäº‹ä»¶å¾ªç¯â€ï¼ˆevent loopï¼‰çš„ç»“æŸæ—¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸‹ä¸€è½®â€œäº‹ä»¶å¾ªç¯â€çš„å¼€å§‹æ—¶,<br> (æˆ‘çš„ç†è§£æ˜¯åŠ åˆ°æ‰§è¡Œæ ˆçš„å°¾ç«¯,å…³äºevent-loopå¯å‚è€ƒnodeå…¥é—¨ä¸­çš„md)</p>
</li>
<li><p>catch å’Œ thenç¬¬äºŒä¸ªå‚æ•°çš„åŒºåˆ«</p>
<p> è§åˆçº§é—®é¢˜3ï¼Œthenç¬¬äºŒä¸ªå‚æ•°æ— æ³•æ•æ‰è‡ªèº«throwçš„error</p>
</li>
<li><p>å¦‚ä½•ç”¨promiseå®ç°aysncçš„series?</p>
<pre><code>function executeSequentially(promises) {  
    var result = Promise.resolve();  
    promises.forEach(function (promise) {  
        result = result.then(promise);  
    });  
    return result;  
}
</code></pre><p> promise arrayä¸èƒ½è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œä»–ä»¬è¿˜æ˜¯ä¼šå¹¶è¡Œï¼Œå› ä¸ºpromiseè¢«åˆ›å»ºæ—¶ï¼Œä»–å°±å¼€å§‹æ‰§è¡Œäº†ï¼Œæ‰€ä»¥éœ€è¦è¿™æ ·ä¸€ä¸ªpromiseå·¥å‚ï¼Œå½“promiseè¢«éœ€è¦æ—¶ï¼Œæ‰ä¼šè¿”å›ä¸€ä¸ªpromise</p>
<pre><code>function myPromiseFactory() {  
    return somethingThatCreatesAPromise();  
}  
</code></pre></li>
<li><p>å¦‚ä½•åœ¨ç¬¬ä¸‰ä¸ªthenä¸­åŒæ—¶è·å–æ¥è‡ªç¬¬äºŒä¸ªthenå’Œç¬¬ä¸€ä¸ªthençš„ç»“æœ</p>
<pre><code>let a = Promise.resolve(2).then((result)=&gt;{
    return test(result).then((result2)=&gt;{console.log(result + &apos;:&apos;+ result2)});
}).then((result)=&gt;{
    console.log(&apos;done&apos;)
})

function test(result){
    let result2 = result +1;
    return  Promise.resolve(result2)
}
</code></pre></li>
</ol>
<ol start="5">
<li><p>ä¸€ä¸ªé—®é¢˜ï¼š</p>
<pre><code>Promise.resolve(&apos;foo&apos;).then(Promise.resolve(&apos;bar&apos;)).then(function (result) {  
    console.log(result);  
});  
</code></pre><p> è¾“å‡ºfoo è¿˜æ˜¯ barï¼Ÿ</p>
<p> ç­”æ¡ˆï¼š foo</p>
<p> å½“åœ¨thené‡Œä¼ çš„æ˜¯éå‡½æ•°æ—¶ï¼Œå³ä½¿ä¼ çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œä¹Ÿä¼šè¢«å¤„ç†ä¸ºthen(null)è€Œå°†resultä¼ é€’åˆ°ä¸‹ä¸€ä¸ªresultä¸­ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ç¬¬ä¸‰ä¸ªé—®é¢˜result.then(promise)ä¸ºä»€ä¹ˆä¸èƒ½è¾¾åˆ°æ•ˆæœï¼Œå› ä¸ºè¿™é‡Œçš„promiseæ˜¯éå‡½æ•°å¯¹è±¡ï¼Œåªæœ‰é€šè¿‡myPromiseFactoryå°†å…¶å˜ä¸ºå‡½æ•°ï¼Œæ‰ä¸ä¼špass throughåˆ°ä¸‹ä¸€ä¸ªthen</p>
<pre><code>Promise.resolve(&apos;foo&apos;).then(function () {  
    return Promise.resolve(&apos;bar&apos;);  
}).then(function (result) {  
    console.log(result);  
});  
</code></pre><p> è¿™æ ·æ‰ä¼šè¾“å‡ºbar</p>
</li>
</ol>
<pre><code>* æˆ‘çš„ä¸€äº›ç†è§£ ï¼šthenä¸­ä¸ºnon-functionå’Œside effectsï¼ˆnon-returningï¼‰æ˜¯ä¸¤ç§æƒ…å†µ

        doSomething().then(  
            Promise.resolve(resultOfDoSomething)  
        ).then(finalHandler);  

            VS

        doSomething().then(function () {  
            doSomethingElse();  
        }).then(finalHandler);  



        å‰è€…
        doSomething
        |-----------------|
                        Promiseå¯¹è±¡ = then(null)
                        |------------------|
                        finalHandler(resultOfDoSomething)
                        |------------------|
        åè€…  
        doSomething
        |-----------------|
                        doSomethingElse(undefined)
                        |------------------|
                        finalHandler(undefined)
                        |------------------|
        ï¼‰
</code></pre>
            <div class="clearfix"></div>
            <hr class="nogutter">
        </div>
        <nav class="pagination" role="pagination">
    
    <a class="pull-left" href="/2017/06/17/å‰ç«¯-NodeJSå¼€å‘æŒ‡å—Note/" style="float: left;">
        â† Node.jså¼€å‘æŒ‡å—ç¬”è®°
    </a>
    
    
    <a class="pull-right" href="/2017/06/17/å‰ç«¯-21ä¸ªjsé¢è¯•åŸºç¡€é¢˜/">
        21ä¸ªjsé¢è¯•åŸºç¡€é¢˜ â†’
    </a>
    
</nav>

        <div class="duoshuo">


</div>
    </div>
</section>


      
<!-- ============================ Footer =========================== -->

<footer>
    <div class="container">
            <div class="copy">
                <p>
                    &copy; 2014<script>new Date().getFullYear()>2010&&document.write("-"+new Date().getFullYear());</script>, Content By . All Rights Reserved.
                </p>
                <p>Theme By <a href="//go.kieran.top" style="color: #767D84">Kieran</a></p>
            </div>
            <div class="social">
                <ul>
                    
                    <li><a href="https://github.com/IrisZhuang" title="Github" target="_blank"><i class="icon-github"></i></a>&nbsp;</li>
                    
                    
                    
                    
                    
                    <li><a href="http://weibo.com/2460421387" title="Sina-Weibo" target="_blank"><i class="icon-sina-weibo"></i></a>&nbsp;</li>
                    
                </ul>
            </div>
            <div class="clearfix"> </div>
        </div>
</footer>

<!-- ============================ END Footer =========================== -->
      <!-- Load our scripts -->
<!-- Resizable 'on-demand' full-height hero -->
<script type="text/javascript">
    var resizeHero = function () {
        var hero = $(".cover,.heightblock"),
            window1 = $(window);
        hero.css({
            "height": window1.height()
        });
    };

    resizeHero();

    $(window).resize(function () {
        resizeHero();
    });
</script>
<script src="/js/plugins.min.js"></script><!-- Bootstrap core and concatenated plugins always load here -->
<script src="/js/jquery.flexslider-min.js"></script><!-- Flexslider plugin -->
<script src="/js/scripts.js"></script><!-- Theme scripts -->


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$('#intro').find('img').each(function(){
  var alt = this.alt;

  if (alt){
    $(this).after('<span class="caption" style="display:none">' + alt + '</span>');
  }

  $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="gallery" />');
});
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

<!-- Initiate flexslider plugin -->
<script type="text/javascript">
    $(document).ready(function($) {
      (function(){
        console.log('font');
        var getCss = function(path) {
          var head = document.getElementsByTagName('head')[0];
          link = document.createElement('link');
          link.href = path;
          link.rel = 'stylesheet';
          link.type = 'text/css';
          head.appendChild(link);
        };
        getCss('https://fonts.googleapis.com/css?family=Montserrat:400,700');
        getCss('https://fonts.googleapis.com/css?family=Open+Sans:400,600');
      })();
      $('.flexslider').flexslider({
        animation: "fade",
        prevText: "",
        nextText: "",
        directionNav: true
      });
    });
</script>

</body>
</html>
